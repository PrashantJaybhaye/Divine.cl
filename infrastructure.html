<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/infra.css">
    <link rel="icon" type="image/png" href="./assets/favicon.png" id="favicon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Infrastructure | Divine Healthcare</title>
    <style>
        /* Minimal, form-specific helper styles (copied from index.html) */
        .field-error {
            display: none;
            color: #b00020;
            font-size: 0.85rem;
            margin-top: 6px;
        }

        .field-invalid {
            border-color: #b00020 !important;
        }

        #form-error {
            display: none;
            background: #fdecea;
            color: #b00020;
            padding: 10px 12px;
            border: 1px solid #f5c2c0;
            border-radius: 6px;
            margin: 10px 0;
        }

        #form-success {
            background: #ecf9f1;
            color: #1e7e34;
            padding: 10px 12px;
            border: 1px solid #b7ebc6;
            border-radius: 6px;
            margin: 10px 0;
        }

        .submit-btn[disabled] {
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>
</head>

<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <a href="index.html" class="brand-logo">
                    <img src="./assets/logo.png" alt="Divine Healthcare Logo">
                </a>
                <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
                    <span class="line"></span>
                    <span class="line"></span>
                    <span class="line"></span>
                </button>
                <div class="nav-links" id="navLinks">
                    <ul>
                        <li><button onclick="window.location.href='import.html'" class="med-import-btn"
                                data-i18n="nav.import_personal">Importaci√≥n uso Personal<span></span></button></li>
                        <li><a href="index.html" data-i18n="nav.home">Hogar</a></li>
                        <li><a href="about.html" data-i18n="nav.about">Sobre nosotros</a></li>
                        <li><a href="#" data-i18n="nav.business">Verticales de negocios</a></li>
                        <li><a href="#" data-i18n="nav.portfolio">Nuestro portafolio</a></li>
                        <li><a href="infrastructure.html" class="active"
                                data-i18n="nav.infrastructure">Infraestructura</a></li>
                        <li><a href="Chile.html" data-i18n="nav.chile">Presencia en Chile</a></li>
                        <li><a href="contact.html" data-i18n="nav.contact">Cont√°ctenos</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <!-- Hero Banner -->
        <section class="infrastructure-hero">
            <div class="hero-overlay">
                <h1 data-i18n="infra.hero.h1">Nuestra infraestructura</h1>
                <p data-i18n="infra.hero.p">Instalaciones de √∫ltima generaci√≥n para la excelencia en la atenci√≥n m√©dica
                </p>
            </div>
        </section>

        <!-- Infrastructure Content -->
        <section class="infrastructure-content">
            <div class="content-wrapper">
                <div class="text-content">
                    <h2 data-i18n="infra.content.h2">Infraestructura de atenci√≥n m√©dica divina</h2>
                    <p data-i18n="infra.content.p1">Un actor reciente pero como grupo, con m√°s de 2 d√©cadas de
                        experiencia en el mercado chileno. Hemos creado un entorno s√≥lido para el negocio y configurar
                        uno de los mejores almacenes de su clase y un robot de despacho sin demoras Sistemas.</p>
                    <p data-i18n="infra.content.p2">Hoy en d√≠a, ofrecemos productos de alta calidad que satisfacen las
                        demandas de nuestros clientes. Nuestra flexibilidad y apertura a diferentes modelos de negocio
                        con servicios 360¬∫ diferenciarnos de otros laboratorios del mercado.</p>
                    <p data-i18n="infra.content.p3">Una clave para diferenciarnos es el servicio; Ayudamos a nuestros
                        clientes en cada paso del negocio y garantizar la completa satisfacci√≥n. Se logra nuestro
                        crecimiento continuo a trav√©s de la importancia del producto. Como empresa, cada producto y cada
                        cliente tiene valor y es esencial para nuestro crecimiento.</p>
                </div>
                <div class="image-content">
                    <img src="./assets/building.jpg" alt="Divine Healthcare Facility" class="featured-image">
                </div>
            </div>
        </section>
    </main>

    <section class="infrastructure-section">
        <div class="section-header">
            <h2 data-i18n="infra.section.h2">Infraestructura de clase mundial</h2>
        </div>
        <div class="qa-section">
            <h3 data-i18n="infra.qa.h3">Est√°ndares de calidad sin concesiones</h3>
            <p data-i18n="infra.qa.p">Cada producto que importamos se somete a rigurosas pruebas en m√∫ltiples etapas
                para garantizar la seguridad y la eficacia.</p>

            <div class="qa-grid">
                <!-- QA 1 -->
                <div class="qa-card">
                    <div class="qa-icon">üß™</div>
                    <h4 data-i18n="infra.qa1.h4">Pruebas anal√≠ticas</h4>
                    <p data-i18n="infra.qa1.p">Pruebas anal√≠ticas, identidad, titulaci√≥n, disoluci√≥n y otras (HPLC, IR,
                        UV)</p>
                </div>

                <!-- QA 2 -->
                <div class="qa-card">
                    <div class="qa-icon">üîç</div>
                    <h4 data-i18n="infra.qa2.h4">Control microbiol√≥gico</h4>
                    <p data-i18n="infra.qa2.p">Recuento total de microorganismos, hongos y levaduras, ausencia de
                        pat√≥genos</p>
                </div>

                <!-- QA 3 -->
                <div class="qa-card">
                    <div class="qa-icon">üìã</div>
                    <h4 data-i18n="infra.qa3.h4">Cumplimiento normativo</h4>
                    <p data-i18n="infra.qa3.p">Registros seg√∫n normativa nacional, cumplimiento de demostraci√≥n de
                        validaci√≥n de procesos y bioequivalencia.</p>
                </div>

                <!-- QA 4 -->
                <div class="qa-card">
                    <div class="qa-icon">üå°Ô∏è</div>
                    <h4 data-i18n="infra.qa4.h4">Estudios de estabilidad</h4>
                    <p data-i18n="infra.qa4.p">Cumplir con los requisitos locales de acuerdo con las pautas ICH</p>
                </div>
            </div>
        </div>
    </section>

    <button class="scroll-to-top" id="scrollToTop">
        <div class="progress-circle"></div>
        <span class="tooltip" data-i18n="common.scroll_top">Volver al principio</span>
    </button>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-main">
                <div class="footer-brand">
                    <img src="./assets/logo.png" alt="Divine Healthcare Logo" class="footer-logo">
                    <p class="footer-description" data-i18n="footer.description">
                        Nuestra Visi√≥n es que nuestros productos posean certificaci√≥n emitida por
                        las m√°s altas agencias reguladoras manteniendo precios asequibles para las
                        instituciones y pacientes con m√°s de 2 d√©cadas de experiencia en el campo.
                    </p>
                    <div class="footer-social">
                        <ul class="social-links">
                            <li><a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a></li>
                            <li><a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a></li>
                            <li><a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a></li>
                            <a href="https://wa.me/56933990606?text=Hello%20Divine%20Healthcare,%20I%20would%20like%20to%20get%20more%20information%20about%20your%20services"
                                aria-label="WhatsApp" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                        </ul>
                    </div>
                </div>

                <div class="footer-links">
                    <div class="links-column">
                        <h3 data-i18n="footer.quick_links">Enlaces r√°pidos</h3>
                        <ul>
                            <li><a href="import.html" data-i18n="footer.link.import_personal">Importaci√≥n uso
                                    Personal</a></li>
                            <li><a href="index.html" data-i18n="footer.link.home">Hogar</a></li>
                            <li><a href="about.html" data-i18n="footer.link.about">Sobre nosotros</a></li>
                            <li><a href="#" data-i18n="footer.link.business">Verticales de negocios</a></li>
                            <li><a href="#" data-i18n="footer.link.portfolio">Nuestro portafolio</a></li>
                            <li><a href="infrastructure.html" data-i18n="footer.link.infrastructure">Infraestructura</a>
                            </li>
                            <li><a href="Chile.html" data-i18n="footer.link.chile">Presencia en Chile</a></li>
                            <li><a href="contact.html" data-i18n="footer.link.contact">Cont√°ctenos</a></li>
                        </ul>
                    </div>
                    <div class="links-column">
                        <h3>Idiomas</h3>
                        <ul>
                            <li><a href="#" class="language-option" data-lang="es" data-i18n="lang.spanish">Espa√±ol</a>
                            </li>
                            <li><a href="#" class="language-option" data-lang="en" data-i18n="lang.english">Ingl√©s</a>
                            </li>
                        </ul>
                    </div>
                </div>

                <form class="contact-form" action="https://formsubmit.co/zzzzzaq291@gmail.com" method="POST"
                    id="contactForm">
                    <!-- Form Inputs -->
                    <input type="text" id="form-name" name="name" data-i18n="form.name" data-i18n-attr="placeholder"
                        placeholder="Nombre" required aria-describedby="err-name">
                    <div id="err-name" class="field-error" data-i18n="form.error.name">Por favor ingrese su nombre.
                    </div>

                    <input type="email" id="form-email" name="email" data-i18n="form.email" data-i18n-attr="placeholder"
                        placeholder="Correo electr√≥nico" required aria-describedby="err-email">
                    <div id="err-email" class="field-error" data-i18n="form.error.email">Por favor ingrese un correo
                        v√°lido.</div>

                    <textarea id="form-message" name="message" data-i18n="form.message" data-i18n-attr="placeholder"
                        placeholder="Tu mensaje" rows="4" required aria-describedby="err-message"></textarea>
                    <div id="err-message" class="field-error" data-i18n="form.error.message">Por favor ingrese su
                        mensaje.</div>

                    <!-- Hidden FormSubmit Config -->
                    <input type="hidden" name="_captcha" value="false">
                    <input type="text" name="_honey" style="display:none">
                    <!-- <input type="email" name="_replyto" placeholder="Your email"> -->
                    <input type="hidden" name="_subject" value="New Contact Form Submission - {{name}}">
                    <input type="hidden" name="_autoresponse" data-i18n="form.autoresponse" data-i18n-attr="value"
                        value="¬°Gracias por contactarnos! Nos comunicaremos con usted pronto.">
                    <input type="hidden" name="_replyto" value="">
                    <!-- <input type="hidden" name="_cc" value="zzzzzaq291@gmail.com"> -->

                    <!-- Error/Success Messages -->
                    <div id="form-error" role="alert" aria-live="assertive" data-i18n="form.error.generic">No se pudo
                        enviar el formulario. Int√©ntalo de nuevo.</div>
                    <div id="form-success" style="display: none;" role="status" aria-live="polite"
                        data-i18n="form.success">¬°Gracias! Su mensaje ha sido
                        enviado exitosamente.</div>

                    <div class="form-actions">
                        <button type="submit" class="submit-btn" data-i18n="form.submit">Enviar mensaje</button>
                        <button type="reset" class="reset-btn" data-i18n="form.reset">Reiniciar</button>
                    </div>
                </form>

                <script>
                    function restorePlaceholders() {
                        const ids = ['form-name', 'form-email', 'form-message'];
                        ids.forEach(id => {
                            const el = document.getElementById(id);
                            if (!el) return;
                            const original = el.getAttribute('data-ph') || el.getAttribute('placeholder') || '';
                            if (!el.value.trim()) {
                                el.placeholder = original;
                            }
                        });
                    }

                    const contactForm = document.getElementById('contactForm');
                    contactForm.addEventListener('reset', () => {
                        // restore placeholders shortly after reset clears values
                        setTimeout(restorePlaceholders, 0);
                    });


                    contactForm.addEventListener('submit', async function (e) {
                        e.preventDefault();

                        const form = this;
                        const nameEl = document.getElementById('form-name');
                        const emailEl = document.getElementById('form-email');
                        const msgEl = document.getElementById('form-message');
                        const errBanner = document.getElementById('form-error');
                        const okBanner = document.getElementById('form-success');
                        const submitBtn = form.querySelector('.submit-btn');

                        // Reset errors
                        errBanner.style.display = 'none';
                        okBanner.style.display = 'none';
                        ['err-name', 'err-email', 'err-message'].forEach(id => (document.getElementById(id).style.display = 'none'));
                        [nameEl, emailEl, msgEl].forEach(el => el.classList.remove('field-invalid'));

                        // Simple validation
                        let valid = true;
                        if (!nameEl.value.trim()) { document.getElementById('err-name').style.display = 'block'; nameEl.classList.add('field-invalid'); valid = false; }
                        const emailVal = emailEl.value.trim();
                        const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailVal);
                        if (!emailOk) { document.getElementById('err-email').style.display = 'block'; emailEl.classList.add('field-invalid'); valid = false; }
                        if (!msgEl.value.trim()) { document.getElementById('err-message').style.display = 'block'; msgEl.classList.add('field-invalid'); valid = false; }
                        if (!valid) { return; }

                        // Set _replyto field dynamically
                        document.querySelector('input[name="_replyto"]').value = emailEl.value;

                        // Set _subject field dynamically
                        document.querySelector('input[name="_subject"]').value = `New Contact Form Submission ${nameEl.value}`;

                        const formData = new FormData(form);

                        // Fetch IP and location (best-effort)
                        let ip = "IP: Unknown";
                        let location = "Location: Not available";
                        try {
                            const res = await fetch('https://ipapi.co/json/');
                            const data = await res.json();
                            ip = `IP: ${data.ip}`;
                            location = `Location: ${data.city || 'Unknown'}, ${data.region || 'Unknown'}, ${data.country_name || 'Unknown'}`;
                        } catch (error) {
                            console.warn('Failed to fetch IP/location');
                        }

                        const timestamp = `Time: ${new Date().toLocaleString()}`;
                        const userDetails = `${ip} | ${location} | ${timestamp}`;
                        formData.append('user_details', userDetails);

                        // Loading state
                        const originalText = submitBtn.innerHTML; // save current HTML
                        submitBtn.innerHTML = (document.documentElement.getAttribute('lang') === 'en')
                            ? '<i class="fas fa-spinner fa-spin"></i> Sending‚Ä¶'
                            : '<i class="fas fa-spinner fa-spin"></i> Enviando‚Ä¶';
                        submitBtn.setAttribute('disabled', 'disabled');
                        form.setAttribute('aria-busy', 'true');

                        try {
                            const response = await fetch(form.action, {
                                method: 'POST',
                                body: formData,
                                headers: { 'Accept': 'application/json' }
                            });

                            if (response.ok) {
                                okBanner.style.display = 'block';
                                form.reset();
                                restorePlaceholders();

                                // Hide success message after 5 seconds
                                setTimeout(() => {
                                    okBanner.style.display = 'none';
                                }, 5000);

                            } else {
                                // Try to parse JSON error from FormSubmit; fallback to generic
                                let errMsg = (document.documentElement.getAttribute('lang') === 'en') ? 'Form submission failed. Please try again.' : 'No se pudo enviar el formulario. Int√©ntalo de nuevo.';
                                try { const j = await response.json(); if (j && j.message) errMsg = j.message; } catch (_) { }
                                errBanner.textContent = errMsg;
                                errBanner.style.display = 'block';

                                setTimeout(() => {
                                    errBanner.style.display = 'none';
                                }, 5000);
                            }
                        } catch (err) {
                            console.error(err);
                            errBanner.textContent = (document.documentElement.getAttribute('lang') === 'en') ? 'Network error. Please check your connection and try again.' : 'Error de red. Verifique su conexi√≥n e int√©ntelo nuevamente.';
                            errBanner.style.display = 'block';

                            setTimeout(() => {
                                errBanner.style.display = 'none';
                            }, 5000);

                        } finally {
                            submitBtn.innerHTML = originalText;  // restore original button content (with icons)
                            submitBtn.removeAttribute('disabled');
                            form.removeAttribute('aria-busy');
                        }
                    });
                </script>


                <script>
                    const scrollToTopBtn = document.getElementById('scrollToTop');

                    // Show button when scrolling
                    window.addEventListener('scroll', function () {
                        if (window.pageYOffset > 300) {
                            scrollToTopBtn.classList.add('show');

                            // Update progress circle rotation based on scroll position
                            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                            const scrollPosition = window.pageYOffset;
                            const scrollPercentage = (scrollPosition / scrollHeight) * 360;
                            scrollToTopBtn.querySelector('.progress-circle').style.transform = 'rotate(' + scrollPercentage + 'deg)';
                        } else {
                            scrollToTopBtn.classList.remove('show');
                        }
                    });

                    // Scroll to top with smooth animation
                    scrollToTopBtn.addEventListener('click', function () {
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });

                        // Add pulse animation when clicked
                        this.style.animation = 'pulse 0.5s';
                        setTimeout(() => {
                            this.style.animation = '';
                        }, 500);
                    });
                </script>


            </div>
            <div class="footer-bottom">
                <p class="copyright" data-i18n="footer.copyright">&copy; 2025 Divine Healthcare. Todos los derechos
                    reservados.</p>
            </div>
        </div>
    </footer>

    <script src="lang.js"></script>
    <script>
        // Toggle mobile navigation
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('navLinks');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            hamburger.classList.toggle('active');
        });
    </script>
</body>

</html>